<!doctype html>
<html>
  <head>
    <meta charset=utf-8>
    <title>Infinity.js</title>
    <link rel=stylesheet type=text/css href=assets/o2.css>
    <link rel=stylesheet type=text/css href=assets/custom.css>
  </head>

  <body>
    <div class='container main-container'>
      <div class=row>
        <div class=span12>
          <h1 class=logo>
            <a class=logo-link href=/>
              <span class=logo-prefix>&infin;</span>
              <span class=logo-suffix>.js</span>
            </a>
          </h1>
        </div>
      </div>
      <div class='row main-copy'>
        <div class=span12>
          <p>
            <a href=/ class=infinity-logo>&infin;</a> is a UITableView for the 
            web: it speeds up scrolling through long lists and keeps your 
            infinite feeds smooth and stable for your users. It is small, 
            battle-tested, and highly performant. The code is hosted on 
            <a href=https://github.com/airbnb/infinity>Github</a>, and 
            distributed under the BSD License. The
            <a href=docs/infinity.html>annotated source</a> is available.
          </p>
          <p>
            <a href=/ class=infinity-logo>&infin;</a> was built by 
            <a href=http://www.airbnb.com/jobs>Airbnb</a>
            alongside the development of the Popular Wishlists and Friends
            feeds, and sees daily production use there today.
          </p>
        </div>
      </div>
      <div class=row>
        <div class=span8>
          <br>
        </div>
        <div class=span4>
          <div class='download
                      panel-background-white
                      panel-border panel-padding'>
            <div class=row-fluid>
              <p class=download-copy>
                Development version (unminified, with comments)
              </p>
              <a href=infinity-wrapper.js class='btn gray'>Download</a>
            </div>
            <br>
            <div class=row-fluid>
              <p class=download-copy>
                Production version (minified and comments stripped)
              </p>
              <a href=# class=btn>Download</a>
            </div>
          </div>
        </div>
      </div>

      <div class=navbar id=reference>
        <div class=navbar-inner>
          <div class=container>
            <a href=#reference class=brand>
              <span class=infinity-logo>&infin;</span> Reference Guide
            </a>
            <ul class=nav>
              <li><a href=#api-listview>Introduction</a>
              <li class=divider-vertical>
              <li><a href=#api-listview>ListView</a>
              <li class=divider-vertical>
              <li><a href=#api-listitem>ListItem</a>
              <li class=divider-vertical>
              <li><a href=#api-config>Configuration</a>
              <li class=divider-vertical>
              <li><a href=#demo>Demo</a>
            </ul>

            <ul class='nav pull-right'>
              <li><a href=# class='pink btn fork'>
                    <i class='icon icon-github'></i> Fork Me
                  </a>
            </ul>
          </div>
        </div>
      </div>

      <div class=row>
        <div class=span12>
          <div class='panel-padding'>

            <div class='row-fluid api-doc' id=api-listview>
              <div class=span8>
                <h2><a class=api-header-link href=#api-listview>ListView</a></h2>
                <p class=api-copy>
                  A <strong>ListView</strong> is a container
                  that moves content in and out of the DOM on the scroll event.
                  ListViews help keep repaint times of expensive pages down
                  (and scrolling smooth) by making sure that there are never
                  too many elements onscreen at a single time. ListViews excel
                  at speeding up long lists of complex HTML elements,
                  where new content is frequently appended to the end and
                  existing content is rarely removed.
                </p>
                <p class=api-copy>
                  ListViews are simple, and have several caveats: they can't be
                  nested inside each other, and they can't have heights set via
                  CSS. Additionally, ListViews can't easily change sizes except
                  by appending or removing elements, and so list items that
                  need to slide open or change their sizing will be difficult
                  to implement. Appending elements to a ListView is relatively
                  fast, but removing elements is slower &mdash; so designs that
                  need to remove elements multiple times a second at high
                  framerates will struggle.
                </p>
              </div>
              <div class='span3 offset1'>
                <div class='panel-background-white panel-border summary'>
                  <div class='panel-header panel-header-dark'>
                    <h3>Table of Contents</h3>
                  </div>
                  <div class=panel-padding>
                    <ul class=unstyled>
                      <li class=pull-right><a href=#api-listview>Summary</a>
                      <li class=pull-right><a href=#api-listview-properties>Properties</a>
                      <li class=pull-right><a href=#api-listview-methods>Methods</a>
                      <li class=pull-right><a href=#>Examples</a>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <div class='row-fluid api-doc' id=api-listview-properties>
              <div class=span12>
                <h3><a class=api-header-link href=api-listview-properties>
                    Properties
                </a></h3>
                <ul class=api-list>
                  <li><code>$el</code>: the jQuery element used as the parent
                  of the ListView.
                  <li><code>width</code>: the width of the ListView.
                  <li><code>height</code>: the height of the ListView.
                </ul>
              </div>
            </div>

            <div class='row-fluid api-doc' id=api-listview-methods>
              <div class=span12>
                <h3><a class=api-header-link href=api-listview-methods>
                    Methods
                </a></h3>
                <ul class=api-list>
                  <li><code>new ListView($el)</code>: creates a new ListView
                  that will append its content inside the given
                  jQuery element. The element passed in must be already in
                  the DOM: otherwise, the ListView will cache incorrect
                  size and positioning data.
                  <li><code>append($el | listItem)</code>: appends a jQuery
                  element or a ListItem to the ListView. Returns either the
                  given ListItem, or the given jQuery element wrapped inside of
                  a new ListItem.
                  <li><code>find(selector | $el)</code>:
                  <li><code>remove()</code>: removes the ListView from the DOM,
                  and cleans up after it.
                  <li><code>cleanup()</code>: unbinds all events, but does not
                  remove the ListView from the DOM.
                </ul>
              </div>
            </div>

            <hr>

            <div class='row-fluid api-doc' id=api-listitem>
              <div class=span9>
                <h2><a class=api-header-link href=#api-listitem>ListItem</a></h2>
                <p class=api-copy>
                  <strong>ListItems</strong> are wrappers for individual DOM
                  nodes placed inside a ListView. You'll normally never need
                  to create ListItems yourself: the ListView will automatically
                  wrap any jQuery elements you pass into it for you. However,
                  you may find it useful to interact with them
                  individually, and so ListViews make it easy to inspect their
                  collections of ListItems.
                </p>
              </div>
              <div class=span3>
                <div class='panel-background-white panel-border summary'>
                  <div class='panel-header panel-header-dark'>
                    <h3>Table of Contents</h3>
                  </div>
                  <div class=panel-padding>
                    <ul class=unstyled>
                      <li class=pull-right><a href=#api-listitem>Summary</a>
                      <li class=pull-right><a href=#api-listitem-properties>Properties</a>
                      <li class=pull-right><a href=#api-listitem-methods>Methods</a>
                      <li class=pull-right><a href=#api-listitem>Examples</a>
                    </ul>
                  </div>
                </div>
              </div>
            </div>

            <div class='row-fluid api-doc' id=api-listitem-properties>
              <div class=span12>
                <h3><a class=api-header-link href=api-listitem-properties>
                    Properties
                </a></h3>
                <ul class=api-list>
                  <li><code>$el</code>: the jQuery element this ListItem wraps.
                  <li><code>top</code>: the top of the ListItem onscreen,
                  relative to its ListView parent.
                  <li><code>bottom</code>: the bottom of the ListItem onscreen,
                  relative to its ListView parent.
                  <li><code>width</code>: the width of the ListItem.
                  <li><code>height</code>: the height of the ListItem.
                </ul>
              </div>
            </div>

            <div class='row-fluid api-doc' id=api-listitem-methods>
              <div class=span12>
                <h3><a class=api-header-link href=api-listitem-methods>
                    Methods
                </a></h3>
                <ul class=api-list>
                  <li><code>remove()</code>: permanently removes the ListItem
                  from the ListView, and cleans up after it.
                  <li><code>cleanup()</code>: unbinds all events and
                  relinquishes all references it holds, but does not remove the
                  ListItem from the ListView.
                </ul>
              </div>
            </div>

            <hr>

            <div class='row-fluid api-doc' id=api-config>
              <div class=span12>
                <h2><a class=api-header-link href=#api-config>
                    Configuring Infinity.js
                </a></h2>
                <p class=api-copy>
                  We've tried to choose sensible defaults for Infinity,
                  but sometimes there are special cases we haven't designed
                  for. Infinity.js can be configured with two options to help
                  make sure scrolling stays smooth for a variety of
                  circumstances. The configuration options are as follows:
                </p>
                <ul class=api-list>
                  <li><code>infinity.config.PAGE_TO_SCREEN_RATIO</code>:
                  internally, Infinity.js puts its ListItems into blocks of
                  <strong>Pages</strong>, and this variable controls how large a
                  page should be relative to the size of the viewport. By
                  default, it is set to <code>3</code>. Larger pages mean
                  that Infinity has to swap pages less frequently, and smaller
                  pages mean faster rendering times. If you have extremely
                  complex pages, you might want to decrease this so that 
                  there's less onscreen to slow down the page; on the other
                  hand, if you have very simple pages, you might want to
                  increase this to minimize even further the possibility of
                  jarring swaps or scroll flickering.
                  <li><code>infinity.config.SCROLL_THROTTLE</code>: Infinity.js
                  throttles its scroll event: it only responds to scroll events
                  every 350 milliseconds. If you'd like to make it respond
                  more or less often, set this value to the desired number
                  of milliseconds you'd like Infinity to throttle to. If you've
                  increased the <code>PAGE_TO_SCREEN_RATIO</code>, you could
                  increase the <code>SCROLL_THROTTLE</code> to do less frequent
                  computation; if you've decreased the
                  <code>PAGE_TO_SCREEN_RATIO</code>, you'll probably want to
                  also decrease the <code>SCROLL_THROTTLE</code> to make sure
                  the smaller pages get swapped onto the page more regularly,
                  since your given buffer around the screen is smaller.
                </ul>
              </div>
            </div>

          </div>
        </div>

      </div>

      <div id=demo class=row>

        <div class=span4>
          <div class=row-fluid>
            <div class='span12 list-view'>
            </div>
          </div>
        </div>

        <div class=span4>
          <div class=row-fluid>
            <div class='span12 list-view'>
            </div>
          </div>
        </div>

        <div class=span4>
          <div class=row-fluid>
            <div class='span12 list-view'>
            </div>
          </div>
        </div>

      </div>

    </div>

    <div class='modal fade' id=save-modal>
      <div class=modal-header>
        <a href=# class=close>&times;</a>
        <h1>Save To Puglist?</h1>
      </div>
      <div class=modal-body>
        <p>Are you sure you want to save this to your puglist?</p>
      </div>
      <div class=modal-footer>
        <a class='save btn' href=#>Yes</a>
        <a class='no-save red btn' href=#>No</a>
      </div>
    </div>

    <script type=text/html id=demo-template>
      <div class=row-fluid>
        <% for(var i = 0, length = pugs.length; i < length; i++) { %>
          <%= pugs[i] %>
        <% } %>
      </div>
    </script>

    <script type=text/html id=demo-pug-template>
      <div class='span12 pug-item'>
        <div class='matte-media-box pug-box'
          data-pug="<%= pug.src %>"
          data-name="<%= title %>"
          data-caption="<%= caption %>"
        >
          <% intendedSize = 322 %>
          <% scale = (intendedSize - 10) / pug.width %>
          <img class='pug' data-original="<%= pug.src %>" 
                style="width: <%= pug.width * scale %>px;
                      height: <%= pug.height * scale %>px;">

          <div class=caption>
            <h4 class=caption-name><%= title %></h4>
            <p class=caption-text><%= caption %></p>
            <div class='price-tag
                        <%= rotateRight ? "rotate-right" : "" %>
                        <%= rotateLeft ? "rotate-left" : ""%>
                        '>
              <div class=price-bottom>
                <div class=curr-symbol>
                  $
                </div>
                <div class=price-text>
                  <%= price %>
                </div>
                <div class=per-night>
                  per night
                </div>
              </div>
              <div class=price-top>
              </div>
              <i class='icon icon-pushpin'></i>
            </div>
          </div>

          <a class='heart<%= saved ? " saved" : "" %>' rel=tooltip title='Save to Puglist'>
            <i class='icon icon-heart heart-inner'></i>
          </a>
        </div>
      </div>
    </script>

    <script type=text/html id=spinner-template>
      <div class=row>
        <div class=span12>
          <img src=assets/images/icons/spinner.gif class=spinner alt='Loading...'>
        </div>
      </div>
    </script>

    <script type=text/javascript src=https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js></script>
    <script type=text/javascript src=assets/js/vendor/ender.min.js></script>
    <script>ender.noConflict();</script>
    <script type=text/javascript src=assets/js/vendor/stdair.min.js></script>
    <script type=text/javascript src=assets/js/vendor/o2.min.js></script>

    <script type=text/javascript src=infinity.js></script>

    <script type=text/javascript src=assets/js/demo/demo-package.js></script>
    <script type=text/javascript src=assets/js/demo/pugs.js></script>
    <script type=text/javascript src=assets/js/demo/names.js></script>
    <script type=text/javascript src=assets/js/demo/taglines.js></script>
    <script type=text/javascript src=assets/js/demo/storage.js></script>
    <script type=text/javascript src=assets/js/demo/index.js></script>
  </body>
</html>
